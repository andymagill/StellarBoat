---
import Page from '../layouts/Page.astro';
import ContactForm from '../components/forms/ContactForm.astro';
import LeadCaptureForm from '../components/forms/LeadCaptureForm.astro';
import NewsletterForm from '../components/forms/NewsletterForm.astro';
import Divider from '../components/ui/Divider.astro';
import Card from '../components/ui/Card.astro';
---

<Page
  title="Form Components"
  description="Full-featured form components with multiple backends"
>
  <div class="max-w-4xl mx-auto px-6 py-12">
    <h1 class="text-4xl font-bold mb-2">Form Components</h1>
    <p class="text-text-muted mb-8">
      Production-ready form components with progressive enhancement, pluggable
      backends, and accessibility built in. Works without JavaScript; upgrades
      with AJAX when available.
    </p>

    <!-- Features Section -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Features</h2>

      <Card variant="raised" class="p-6 space-y-4">
        <div>
          <h3 class="font-semibold text-text mb-2">
            ✓ Progressive Enhancement
          </h3>
          <p class="text-text-muted text-sm">
            All forms work with native HTML POST without JavaScript. When JS is
            available, they upgrade to AJAX with status feedback.
          </p>
        </div>

        <div>
          <h3 class="font-semibold text-text mb-2">✓ Pluggable Backends</h3>
          <p class="text-text-muted text-sm">
            Switch backends per-form or globally. Supported: Web3Forms (free),
            Netlify, API, Formspree, Formspark, or custom.
          </p>
        </div>

        <div>
          <h3 class="font-semibold text-text mb-2">✓ Accessibility</h3>
          <p class="text-text-muted text-sm">
            All inputs have labels, error messages announce via ARIA, submit
            button shows
            <code class="text-xs bg-surface-2 px-1 rounded">aria-busy</code> during
            submission.
          </p>
        </div>

        <div>
          <h3 class="font-semibold text-text mb-2">
            ✓ No External Dependencies
          </h3>
          <p class="text-text-muted text-sm">
            Pure Astro components with vanilla TypeScript. No React, Vue, or
            form libraries.
          </p>
        </div>
      </Card>
    </section>

    <Divider />

    <!-- Configuration Guide -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Configuration</h2>

      <Card variant="default" class="p-6 space-y-4">
        <div>
          <h3 class="font-semibold text-text mb-2">
            Global Default (src/config/forms.ts)
          </h3>
          <pre
            class="bg-surface-2 p-4 rounded-md text-xs text-text overflow-auto"><code>{`import { forms } from '../../config/forms';

export const forms = {
  defaultBackend: 'web3forms',
  web3formsKey: 'your-key-here',
  apiUrl: undefined,
  formspreeEndpoint: undefined,
  formsparProjectId: undefined,
};`}</code></pre>
        </div>

        <div>
          <h3 class="font-semibold text-text mb-2">Per-Component Override</h3>
          <pre
            class="bg-surface-2 p-4 rounded-md text-xs text-text overflow-auto"><code>{`<!-- Switch backend for one form instance -->
<ContactForm 
  backend="api" 
  apiUrl="https://api.example.com/contact" 
/>

<!-- Multiple forms, different backends -->
<ContactForm backend="web3forms" />
<NewsletterForm backend="api" apiUrl="https://api.example.com/newsletter" />`}</code></pre>
        </div>
      </Card>
    </section>

    <Divider />

    <!-- Contact Form -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Contact Form</h2>

      <div class="space-y-8">
        <!-- Live Example -->
        <div>
          <h3 class="text-sm font-medium text-text-muted mb-3">Live Example</h3>
          <p class="text-sm text-text-muted mb-4">
            Uses the default backend from your forms config.
          </p>
          <Card variant="default" class="p-8">
            <ContactForm />
          </Card>
        </div>

        <!-- Code Sample -->
        <div>
          <h3 class="text-sm font-medium text-text-muted mb-3">
            Override to API Backend
          </h3>
          <p class="text-sm text-text-muted mb-4">
            Route to a custom API endpoint (Cloudflare Worker, Vercel Function,
            etc).
          </p>
          <pre
            class="bg-surface-2 p-4 rounded-md text-xs text-text overflow-auto"><code>{`<ContactForm
  backend="api"
  apiUrl="https://api.example.com/contact"
/>`}</code></pre>
        </div>
      </div>
    </section>

    <Divider />

    <!-- Lead Capture Form -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Lead Capture Form</h2>

      <div class="space-y-8">
        <!-- Lead Capture Form / Web3Forms -->
        <div>
          <h3 class="text-sm font-medium text-text-muted mb-3">
            Lead Capture Form
          </h3>
          <p class="text-sm text-text-muted mb-4">
            Four-field form for lead generation: name, email, company
            (optional), phone (optional). Submits to global default backend.
          </p>
          <Card variant="default" class="p-8">
            <LeadCaptureForm />
          </Card>
        </div>
      </div>
    </section>

    <Divider />

    <!-- Newsletter Form -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Newsletter Form</h2>

      <div class="space-y-8">
        <!-- Live Example -->
        <div>
          <h3 class="text-sm font-medium text-text-muted mb-3">
            Vertical Layout (Default)
          </h3>
          <p class="text-sm text-text-muted mb-4">
            Single-field email form in vertical layout. Good for dedicated
            newsletter signup pages.
          </p>
          <Card variant="default" class="p-8 max-w-md">
            <NewsletterForm />
          </Card>
        </div>

        <!-- Code Samples -->
        <div class="space-y-6">
          <div>
            <h3 class="text-sm font-medium text-text-muted mb-2">
              Compact Horizontal Layout
            </h3>
            <pre
              class="bg-surface-2 p-4 rounded-md text-xs text-text overflow-auto"><code>{`<NewsletterForm compact />`}</code></pre>
          </div>

          <div>
            <h3 class="text-sm font-medium text-text-muted mb-2">
              Override to API Backend
            </h3>
            <pre
              class="bg-surface-2 p-4 rounded-md text-xs text-text overflow-auto"><code>{`<NewsletterForm
  backend="api"
  apiUrl="https://api.example.com/newsletter"
/>`}</code></pre>
          </div>
        </div>
      </div>
    </section>
  </div>

  <style>
    code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.875rem;
    }
  </style>
</Page>
