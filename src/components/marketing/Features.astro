---
/**
 * Features Component
 *
 * A section displaying a list of features with icons, titles, and descriptions.
 * Supports three layout variants:
 * - `grid-3`: Three-column grid (default)
 * - `grid-2`: Two-column grid
 * - `list`: Vertical list layout
 *
 * @example
 * ```astro
 * <Features
 *   variant="grid-3"
 *   items={[
 *     {
 *       icon: "rocket",
 *       title: "Super Fast",
 *       description: "Optimized for speed"
 *     },
 *     {
 *       icon: "zap",
 *       title: "Edge Ready",
 *       description: "Deploy anywhere"
 *     }
 *   ]}
 * />
 * ```
 */

import Icon from '../ui/Icon.astro';
import Card from '../ui/Card.astro';

interface Feature {
  /** Icon name (Heroicons format, e.g., "heroicons:rocket-launch") or image path */
  icon?: string;
  /** Optional image URL for icon instead of Heroicons */
  iconImage?: string;
  /** Feature title */
  title: string;
  /** Feature description */
  description: string;
}

interface Props {
  /** Layout variant */
  variant?: 'grid-3' | 'grid-2' | 'list';
  /** Array of features to display */
  items: Feature[];
  /** Additional CSS classes to apply to the root element */
  class?: string;
}

const {
  variant = 'grid-3',
  items,
  class: classProp = '',
} = Astro.props as Props;

const gridClasses = {
  'grid-3': 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8',
  'grid-2': 'grid grid-cols-1 md:grid-cols-2 gap-8',
  list: 'space-y-6',
};
---

<section class={`py-16 px-4 sm:px-6 lg:px-8 ${classProp}`}>
  <div class="mx-auto max-w-6xl">
    <div class={gridClasses[variant]}>
      {
        items.map((feature) => (
          <Card variant="raised" class="flex flex-col items-center text-center">
            <div class="mb-4">
              {feature.iconImage ? (
                <img
                  src={feature.iconImage}
                  alt={feature.title}
                  class="h-32 w-32 md:h-40 md:w-40 object-contain"
                />
              ) : (
                <div class="flex items-center justify-center h-32 w-32 md:h-40 md:w-40 rounded-md bg-primary-500 text-white">
                  {feature.icon && (
                    <Icon name={feature.icon} class="h-16 w-16" />
                  )}
                </div>
              )}
            </div>
            <h3 class="text-lg font-semibold text-white mb-2">
              {feature.title}
            </h3>
            <p class="text-neutral-400">{feature.description}</p>
          </Card>
        ))
      }
    </div>
  </div>
</section>
