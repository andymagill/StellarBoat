---
import { navConfig } from '../../config/nav';
import { siteConfig } from '../../config/site';

const items = navConfig.items;
---

<header class="absolute top-0 left-0 right-0 z-50">
  <!-- Skip to main content (appears on keyboard focus) -->
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only focus:absolute focus:z-50 focus:top-4 focus:left-4 focus:px-4 focus:py-2 focus:bg-neutral-800 focus:text-white focus:rounded-md focus:ring-2 focus:ring-primary-400 focus:outline-none"
  >
    Skip to content
  </a>

  <div class="flex items-center justify-between px-6 py-4 max-w-6xl mx-auto">
    <!-- Brand/Logo -->
    <a href="/" class="text-xl font-bold text-primary-400"
      >{siteConfig.brandName}</a
    >

    <!-- Desktop Navigation -->
    <nav aria-label="Main" class="hidden md:flex gap-6">
      {
        items.map((item) => (
          <a
            href={item.href}
            class={`text-sm font-medium transition-colors ${
              item.active
                ? 'text-primary-400'
                : 'text-neutral-400 hover:text-white'
            }`}
          >
            {item.label}
          </a>
        ))
      }
    </nav>

    <!--
      Mobile hamburger (pure CSS).
      The <label> is a direct sibling of <input class="peer">, so
      peer-checked:[&>span:nth-child(n)]: compound variants work correctly â€”
      Tailwind generates: .peer:checked ~ .label-class > span:nth-child(n) { ... }
    -->
    <input
      type="checkbox"
      id="nav-toggle"
      class="hidden peer"
      aria-hidden="true"
    />
    <label
      for="nav-toggle"
      aria-label="Toggle navigation"
      class="md:hidden cursor-pointer flex flex-col gap-1.5
        peer-checked:[&>span:nth-child(1)]:rotate-45
        peer-checked:[&>span:nth-child(1)]:translate-y-2
        peer-checked:[&>span:nth-child(2)]:opacity-0
        peer-checked:[&>span:nth-child(3)]:-rotate-45
        peer-checked:[&>span:nth-child(3)]:-translate-y-2"
    >
      <span
        aria-hidden="true"
        class="w-6 h-0.5 bg-white block transition-all duration-300 origin-center"
      ></span>
      <span
        aria-hidden="true"
        class="w-6 h-0.5 bg-white block transition-all duration-300"></span>
      <span
        aria-hidden="true"
        class="w-6 h-0.5 bg-white block transition-all duration-300 origin-center"
      ></span>
    </label>
  </div>

  <!-- Mobile Navigation Menu (peer-checked:flex overrides hidden; specificity wins) -->
  <nav
    aria-label="Mobile"
    class="hidden peer-checked:flex flex-col bg-neutral-800 border-t border-neutral-700 px-6 py-4 gap-3"
  >
    {
      items.map((item) => (
        <a
          href={item.href}
          class={`block py-2 font-medium transition-colors ${
            item.active
              ? 'text-primary-400'
              : 'text-neutral-400 hover:text-white'
          }`}
        >
          {item.label}
        </a>
      ))
    }
  </nav>
</header>
